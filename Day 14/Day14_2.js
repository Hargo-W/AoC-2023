const input = `#..O.#..#...##O..O.......O.#..#.O#.#.....#O.#.O..#OO....O..O..O.OO....O.O#.O..........#....OOO..O##O
.#O..O.O...OO..#..O...#....OO.O.........O.....#OO.#.#..O#...O..O..#..#.....##....O.#OO##O.O..#O..O.#
...O..#..OO.O#..O..#.......#...O#O..O###O.O......#.O...#O..O.#.#O.#....OO.OO.O.........OO#.#O..##..#
.O..OO.O#O....#...#O.OO....#O.#..O#O....O......##.O#.#.O#O.O.#.#........O.#......O....#.........O##.
.#..#..O.#...O..O.OO....#.#O....#O.O.....OOO#..##OO.O.O.O.##O.....O.O.....#.OO#..............#...OO.
O#O..#O.O..........#O.....O.....#..#O#...O#O.##....#...##.....##.#.#....#....O.O...O....#O..#O#.....
..#...O#..O..O#O.O...O.#OO...#.#..##OO.#O....O...O.....O..#.OO#.O.O.....O#.O.....O.##O...O.##.....O.
..O..O.OO.#.#....O.##OOO.O..O.....O.#.....#....O.#.O#..............O.#O..O..O#.O####.#..#.#.#.###...
O..#O.#.OO..........O##...O.......OO....O.....O..O..OO...O....O.#O...O#O#.......OO...#....O.#.......
......##.....OO...#..#O#........#.#.O.O.#..#.#..#....#.....OO#O#....##O.OOO......#....O.......O.....
..O...#.....#...#.OO...#O....#..O.##....O.#.O....O...O..O.#....O#..#.....##..O..O....O..#OO..O......
.O.....OO.....#.O#...O#........#..O...O#...O..OO..O##...O#O.O.O#.......#...O.O..##..O.OO...#.....O..
.....O.#O####..O#O........OO...##O..#..#..O....OO..O.#.O.......O#...#.#...OOO#.OO.O.......#O.OOO.##.
..#.#O#.........O.O...O.O.#..O#.#.O...O.#.O.O.#...O#......#......O.OO...#......O#.#O.#.OO#...O.O.O..
#......#..O....O...O.O#...O.O......#O#.#.....#.....##OOO.........#........O..O.O...O#.........OO.#OO
.#.O....##...O#O..................O.#O.........O.#..O.#..O...#O#..#..O...O...O.O.OO.#...OO#OO.##....
OO..O..O....#..#O...#..#..........##O#O.##..#.O....#.OO.O##.#......O#...O.#O...OOO.O.#.O....O.#.O...
#.O.#.......O...#....#...O..O.OO..O.#.#.##O.O.#OO....OO.......O.......O....O.O.OO...#.#......#....O.
O....O.O#.O..##..#..#..........OO......O.O.....O...#.#...#.OO.O.....#..O.O...#....OO.#......#...O...
OO..#..O..........#..O.O...O.OOO.OO...#...OO.....O.O.OO##.O..O..#..#.O.#.##.O..........O......O...O.
....O.O..O.....##..#.O..#.#.....O.O.O....O#.#.....OO..O....#...........O..OO##.....O.##..##O...#..O#
..O.O#.O......O.....OO.OOOOO..#...O#O...#O##....#..#.....O#O............O.O....O#O......O..####O.O#O
#..O.O............###.O..#....O.#...#.O#..O.OOOO....O..#.#.#.O...#.OOO.#.O..O.#...O#.O..O....#..OO..
#O...O.#..O#OO#..O......#.##O......OO.O...O.OOO#O#....OO.#O.O##.....O.#..###..O#...O......OOOO.O.O.O
..#..O..O.OO...#..#.#..#..O#.O#O...OOOO##...#..#...#.O....OO......#O.O....O....#.O..O..O.......OO...
.......O..OO...O..O...O...O#.OO#.#.#...#OO.......##.OO..#....OO...O....#O.....#.O.OO.O.O#...#.#.#...
.#O##..O..OO.#O.O...OO......O.#...O#.O....#........#O.#.....#..O.#.###.O#.O.#O....O...O....#...O.O.O
...##.#....O##...O.#O#.O.#..#..#.....OO..#.OO....#O.#.....#.....##..OO..#O.....OO.OO....#..OO#.O.##.
O...#O#..O..##O.........O##....O.#.............#.O#.....#.O..#...O...#.O.......#..#.OO...O...#..O..#
O.#.OO.....##..##....OO.#...#...O..O#..#..#.O#...O#..#..O.#OO#.O.....O.OOO....O.O.......#...OO..##..
..#.###..O.O.O..O...O..##..O#.O..O....O..#..#.#..O..#...##.O#.....##....#O.#O.OO..O..O#..O#..O......
.###..#..#O.O##..OOO..OO#.O#...#O....#.....O......OO.O.OO#.OOO...#......O.#....O.O..OOO.....#O...#.O
..O..#...O.....OOO.O.O#......#.......OO...#..O..O.O#..#.O.O..OO#..OOO.O...#...#OO..O.OOO.OOO##......
OO#.O..#..OOOOO..##.......#OO....#O..#.O...O..#..#.##....O.#OO.#..####O.......O...........#.O#......
..........O#..O....#..#......O..OO...............O.##OOO#O..O....#......#..#..O..O.O..#.O.#....O.#.O
.#O.OO..#.O.#....#....###...O.....##..#...O.O#O..##....OOO.#..##...O...#....O##...#O...O....O..O..O.
#.....O....O#.#........#O..#..#O.O........#.#....OO#..O.O..OOO#..O..........OOO.O...O....#.#..OO##..
..O...OOO....##..##...O#.O..O#.#....O#...O...#.O..O.O...OOO...OO...#O.#..O.#.....#........O#O...O##.
O.O...#.O.O..#O..O...O.......O#.O.......#.OO###.##.O#....#.....#.....#O.........##..#....OO..O...O#O
.O..OO.#O...#..#.....#.O..O.#.......OO......O...OO.O....O.O.....O...#O.....#......O#.#####.O.O...O.O
#O.....O.......O....#...O.O.OO.#.#O.OO......#OO..O.#.......#...O.#.#.OO..#.O..#.#...#..O......OO..O.
...#O#...#..#OO....#.........O.#.O.....O#....##.O.#....#...#...#....#..#.OO......O.O..##.#......OO..
O........O.....#.O..O............OOO..##....O#OO..O#...#....#.#.OO#O.O.O#...##.#..OO...#O...O.O...#.
.........##.#..O..#...OO.O#..O..#..#...O.O.O.OOO.O...O#..#O.#......O.#O...O.O..#......O...##.O.O..O.
O..O..#..O...#.#OO...........O.....O....#...#.O.......#..#O.......O#.......#......#..O..O.#....O#.O.
....O.O..O.O.O..#.#..O##..#..O.#..O..#.###O#..#O..O...O....O..OO.#..#OO#O..O......#....O.O.....#O...
#.........#.#....#..##OOO.......##O..O..O..O.O.#O..#.O#..O.#O..O#..#O..##O...O.O.O.#O..#.O#O...#.O.O
......O....O..O#..OO#..OO..#...O....O.....O..#..#.O..##.O......#..#O..#O...#.......O...#.#..OO...O..
.#....O#...............#.....#.O#..#O...#...#.O...O.#..O##..O#...O..........OOOO..O.#..O...O..#.....
..#O#..O.OO.O...O#.O......##.##O.......O..O.#....O.O#O##.#..OO.#....OO.O..OO...#.O.O.....#.##.###.O.
.##.O.OO.OO.....#O....##OO...O.#O.#...##.O....O##...O#.#....#.....O...OO.OO..#OO.....#OO........#..#
.#O.O...#O.##.O.##OO.#O#..#...#.#.O#.OO#.O.O.O#..#....O#OO....##...#.O.O#.O....O..#..#.OO.....#..#..
....O#....#OOO.O.O..#O..#O.O..#.......O#..#....O...OO...O..O..##O...#.O....O..O.O.#...##.OO#O....#.#
OO.......O.#..#....OO..O#.#.OO...#.#.#.O.....##.....OO.#...#....###O#..............O...O........O...
.O.#....O....O........O#.....#.....O.O#..#..OO.......O....#....#O.#.O...OO..##.O.........OO.##..##..
.#..#..OO.##......##...#O#.O.O.O.#..O#..O........O.....#.##...O...##O..O.OO.O.#.OO......O.O..#..##O.
#O.O...O......##O.##OO....##....#O.O.OO.#.O.....O#.##...#.....O..#..O...O......O#O..O#O...#..O......
.O....#..OO..........#.O##.#.O.#.#O....O..#..O...O.#OO..#.....O......#....##......#..O....#...O...O#
OO.#.OOO.#OOO#.##...#.O.O.#O#..O...#....OO.O...OOOO....#.O....O...O.......#.#O.##OO..O..#OO.......OO
#.#.#........#....#..O..O.#..#.O#OO.#......#..###..O.O....O.OO#...#.O.#..#..O.....#...............OO
.#.O..OO#O##..#..#...##O.O....#.OO..O.OOO.#O#..OOO.O.......##O...OO...O..........#O.O..#..OO#..#....
O.#...#..#...#O#..O.OO..#.#.O..OO......O.#..#O...#...OO...#.#...OO..#..#....#....##OO.........O.....
..##.....#O.#O.O.O..#...#..#O#.....O..O....O......O#..#O...O#.#.....O.#O..OO..#.O.....#.......O.....
.#.#..O.O.OOOOOO...##.........##O.##O#.O#O..#.....O.O.O..#..O#.O.O#............#O.......#.....#O.#..
...O......O.O..O.#..OO.O##O...###O#.O..O#O#..O.#.#.......#OO..O....O.....#.#.OO#....O.O.OO...O.#.OO.
.#...O..O#......O...O.O....O..O...#.OO.........O.....O#..O.....O...#..O##O.O.O.....O.#.....O##..OO..
##.#....O.O.....OO.O......O.O...O.#OO.O.O.O..O#...O.O..OOO.O#.#.#.###.....OO#OO..#..O.O#..O...O.....
..O.#..#.....O.#..#..#....OO#O.O.O#......##.#.O.#.##.O..#.O...........O.#....O#....OO......#...#.O#.
...O..O...O.......#....#...#.O.#....#O#.....O....O...O#.....#..#.#O.#.#...#..##....#....#...O..O#...
OO.....#.......#O#.O##OO.#.#.O.OO#O..#.#..#O#.O.....O..##O.....#O.##O..#..###...O....O...OO...#.O#..
...#.O##.....#.....OO...O...OO...O...##..O.....#.#..OO...O##....O.O...O#.....#.#..O..O.....O#.#.#..O
.#O..O.....O...#......O#...O.....#O#.O......####O......#O...O.O#......##O#O##O..OOO###.O.........O.#
..O.....O#...#O.#OO.......OO..#...#.O.#.O....O..#.....O.O..O..OO.#O..#.O..##..O.O.......O..#O#..#...
...O#....#.......OO#.##..#.....#..O.....#..##...##..OO#..#.......#.O#O.......O.#..#.O..O..O...O..#..
O.#..#.O...........#....OO.O.#O..O.O......#..O....##O.O..O...OOO#..O..OO...OO#.#.O.OO.O#.OO...OO.#..
O#O#..O..O#.O...#..O...##O.#.#.O#.O..........O.O#..O...##...#.O.........#.##...#..OO....#O........O.
...#.O.O....#.........O.OO..#.#OO...O.O#..#.......#..#.O.#.....O..O.#O..OOO..O.##........##.#OO...#.
#...OOO....OO.O.O#O....#O....O.#.O.O...#....##.##OO...#.O..O.O....O#...O#.O...O#OO.O#......OOO#.O...
..#.#O#.O.O.#O............#.#...O.......O#..OO.O.#..O.O.O..O...O#...#....#...##O.O.#...#...#.#.O..O.
..#O..O.O...OO..OOO.....#O.O........#.O#....#....O.O#.O.O.#.#OO..O.#............O.O....#.......O....
O#.O.OO.O.#...#..O#.#...#.O#.O...O.O..O....##.O.#O.........OO.O#...O...##.OO...##.O..O#O...#O.#..#.#
..#.O....O...O..O....#O...#.#.O....#.#.O.#....##........#...#..##...O.OOO#.O.O..O#.#.O.....O...OO..#
..#.....O.O.#OO.#.O.......O.O......O#.#...#..##.O....#.O..#.O..#..O#..#...O...#......OO.#...OO...#..
....##..O....#...#......#O.#.#OOOO......O....#.#O........#....#....#.##.........#..O..#.#O...OO##...
O#..O..O...#.O..OO#.O.O...O.##..O..#...O.#O..O...#.O#O#.#.#...O..O#O.....O.O#O.....#O.#..........#..
..O....###...O#..O..O..O....O..OO...O.O..###.#......O##...O..#..#........O...O.O.OO..##.....O#..#.#.
.#.#.......O#....#.OO#..#.O..O.............O#...##.O...O#.O#O.#..#.#.###..#..#.#OO.OO#..#..#O#.O....
...#O..O..O.O..O..#...OO..O.OO#...#.O#.O..#...O..........##..O........O.O....O..O.......#..#...OOOO.
O....O......O.....##.#...O.#..O......#..O#.O#O..OO##....#......##..O.#..#.O##O.....##OO.........O...
O.##....OO....OO..O...O..O...O...O...OO.OO###O..#.#..#O#..O.O.#.....O...O....OO.O..O..#O..#O....OO..
...#O..#.......O##.#.......#......#.O..O....O...#...##.O#.OOO##..#..O.#..O.O.O#..OO...#....#O.O...O.
...O.O.O........#.O#..#OOO..O...O.....O.....OO..O.#...O#.......O.....OO.O..#.....O.....O#...O.O.....
...#..OO...#..O...#...O..O#O..O........OO.#..#O#..OO..O......####....#..#..#...#...OO.#.OO.OO.#....O
O##....#...OO..O..##O.O..OO.#...O.O#...O....#.....#......#.#.O#...#O.O....O#.##.O..#...O.#.O#.##..#.
OO...O..OO.O.#O.........#OO.O.#.O..O..O..O#..#.#OO.OO..O...OO#...##...O.......##...O.O#..#...#....OO
.O.O.#.O.O...OOO.#.#...#..O...OO..O....#.......OO.#......O.......#...#....#.O...O#O.........OO.O....
........#.#....#....O.#....O#OO..OO...OO....#...O....O.OOOO....#......#.O..O#####.OO..#..O##.......#
.O....#OO#.O#O.OO.#...#.#..O..O..###...OO.#..........O#O...#.....O..O#OO.#.O.OO..O.#..#.O#.#.#....#.
..O#.O.....O.O#OO..##...OO.#.#...OO..OO#.O.#OO#.OO.#.....O.O.O..O.....O#......O#...OO..#...O...#.#..
O..OO....O#.O.#O...#O..OOO.O...OOO.O..##..O..O...O#..#.OO...O....O.......#......OO.....OOO...#O.O##.`.split('\n').map(line => line.split(''))

const moveRockNorth = (field) => {
    for (let i = 1; i < field.length; i++) {
        for (let y = 0; y < field[0].length; y++) {
            if (field[i][y] === 'O' && field[i - 1][y] === '.') {
                field[i][y] = '.';
                field[i - 1][y] = 'O'
                moveRockNorth(field)
            }
        }
    }
    return field
}

const moveRockWest = (field) => {
    for (let i = 0; i < field.length; i++) {
        for (let y = 1; y + 1 < field[0].length; y++) {
            if (field[i][y] === 'O' && field[i][y - 1] === '.') {
                field[i][y] = '.';
                field[i][y - 1] = 'O'
                moveRockWest(field)
            }
        }
    }
    return field
}

const moveRockSouth = (field) => {
    for (let i = 0; i + 1 < field.length; i++) {
        for (let y = 0; y < field[0].length; y++) {
            if (field[i][y] === 'O' && field[i + 1][y] === '.') {
                field[i][y] = '.';
                field[i + 1][y] = 'O'
                moveRockSouth(field)
            }
        }
    }
    return field
}

const moveRockEast = (field) => {
    for (let i = 0; i < field.length; i++) {
        for (let y = 0; y < field[0].length; y++) {
            if (field[i][y] === 'O' && field[i + 1][y] === '.') {
                field[i][y] = '.';
                field[i][y + 1] = 'O'
                moveRockEast(field)
            }
        }
    }
    return field
}

const spinCycle = (field) => {
    field = moveRockNorth(field)
    field = moveRockWest(field)
    field = moveRockSouth(field)
    field = moveRockEast(field)
    return field
}

let dizzyField = input;

for (let i = 0; i < 10; i++) {
    dizzyField = spinCycle(dizzyField)
}

let total = 0;

for (let i = 0; i < dizzyField.length; i++) {
    for (let y = 0; y < dizzyField[0].length; y++) {
        if (dizzyField[i][y] === 'O') total += dizzyField.length - i
    }
}

console.log(total)